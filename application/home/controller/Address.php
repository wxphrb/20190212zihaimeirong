<?phpnamespace app\home\controller;use app\home\controller\Base;use think\Controller;use think\Db;use think\Request;use think\Session;class Address extends Base{    /*     * 地址     * */	public function index(){		$data =Db::name('address')->where(['user_id'=>Session::get('user_id')])->order(['status'=>'desc','id'=>'desc'])->field('id,username,mobile,user_id,prov,city,area,address,status,tower_num')->select();//		dump($data);die;		return $this->fetch(			'index',[				'title'=>"我的地址",				'list'=>$data,			]		);	}	/*	 *  =设置默认地址	 * */	function update_status() {		$param  = Request::instance()->param();		$updataaddress = Db::name('address')->where('user_id',$param['user_id'])->update(['status'=>0]);		if($updataaddress) {			Db::name('address')->where('id',$param['id'])->update(['status'=>1]);			return 1;		} else {			return 2;		}	}	/*	 *  添加地址	 * */	function add_address() {		if(Request::instance()->isPost()){			$param = Request::instance()->param();			$param['user_id'] = Session::get('user_id');            if($param['status']==1){                $map = [                    'user_id' => Session::get('user_id'),                    'status' => 1                ];                $moren_id=Db::name('address')->where($map)->value('id');                Db::name('address')->where('id',$moren_id)->setField('status','0');            }			$address = Db::name('address')->insert($param);			if($address) {				return 1;			} else {				return 2;			}		}		return $this->fetch('add_address',[			'title'=>"添加地址",		]);	}	/*	 *  修改地址	 * */	function update_address() {		$param = Request::instance()->param();		if(Request::instance()->isPost()) {			$data = [				'user_id'   => Session::get('user_id'),				'username'  => $param['username'],				'mobile'    => $param['mobile'],				'prov'      => $param['prov'],				'city'      => $param['city'],				'area'      => $param['area'],				'address'   => $param['address'],                'status'    => $param['status'],                'tower_num' => $param['tower_num']			];            if($param['status']==1){                $map = [                    'user_id' => Session::get('user_id'),                    'status' => 1                ];                $moren_id=Db::name('address')->where($map)->value('id');                Db::name('address')->where('id',$moren_id)->setField('status','0');            }			Db::name('address')->where('id',$param['id'])->update($data);            return 1;		}		$address_find = Db::name('address')->where('id',$param['id'])->find();		return $this->fetch('update_address',[			'title'=>"修改地址",			'vo'=>$address_find,		]);	}	/*	 *  删除地址	 * */	function del_address() {		$id =  Request::instance()->param('id');		$del_address = Db::name('address')->where('id',$id)->delete();//		dump($del_address);die;		if($del_address) {			return 1;		} else {			return 2;		}	}}