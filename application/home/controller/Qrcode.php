<?php/** * Created by PhpStorm. * User: Administrator * Date: 2018/1/4 * Time: 10:28 */namespace app\home\controller;use think\Db;use think\Request;use think\Session;use app\home\model\User as ThisUser;require EXTEND_PATH . 'wechatss/wxclass/Wechat.class.php';class Qrcode extends Base{    protected function _initialize()    {        parent::_initialize();        //底部默认选中        $this->assign('mo_foot',3);    }    public function qrcode(){        $options = array (            'token' 		 => 'bohanshangcheng', // 填写你设定的key            'encodingaeskey' => 'Wp6FVjA5LP0sN3ihesjGo1H5GahYb6HApaqlgJMMTyZ', // 填写加密用的EncodingAESKey            'appid' 		 => 'wx4238c6e26b9c09e2', // 填写高级调用功能的app id            'appsecret' 	 => '489369ea280291bac96768614f205d20' // 填写高级调用功能的密钥//         'partnerid' => '', // 财付通商户身份标识//         'partnerkey' => '', // 财付通商户权限密钥Key//         'paysignkey' => ''  // 商户签名密钥Key        );        $user_id = Session::get('user_id');        $weObj   = new \Wechat ( $options );        $ticket  = $weObj->getQRCode($user_id,1);        $httpurl = $weObj->getQRUrl($ticket['ticket']);//http网址 打开是图        $this->assign('httpurl',$httpurl);        return $this->fetch();    }}