<!--顶部导航-->{include file="public/header" /}<!--顶部导航--><body class="bgfafafa"><div id="page">    <div class="xian"></div>    <div class="biao1">        <div class="biao1_zi">收件人:</div>        <div class="biao1_sr"><input value="{$vo.username}" id="username" type="text" ></div>    </div>    <div class="biao1">        <div class="biao1_zi">手机号码：</div>        <div class="biao1_sr"><input value="{$vo.mobile}" id="mobile" type="text" ></div>    </div>    <div class="biao1">        <div class="biao1_zi">所在地区：</div>        <div class="biao1_sr"><input  type="text" value="{$vo.prov}{$vo.city}{$vo.area}" readonly id="J_Address" ></div>    </div>    <div class="biao1">        <div class="biao1_zi">收货地址：</div>        <div class="biao1_sr"><input id="address" value="{$vo.address}" type="text" ></div>    </div>    <div class="biao1">        <div class="biao1_zi">楼门-楼牌号：</div>        <div class="biao1_sr"><input id="tower_num" value="{$vo.tower_num}" type="text" ></div>    </div>    <div class="biao1">        <div class="biao1_zi">设置为默认地址：</div>        <div class="biao1_sr"><input class="aui-switch" id="on1" type="checkbox" {if condition ="$vo.status eq 1"} checked {/if}></div>    </div>    <div class="tx_tj" style="margin-top:1.4rem"><input type="button" onclick="update_address()" value="保存"></div>    <input type="hidden" id="prov" value="{$vo.prov}">    <input type="hidden" id="city" value="{$vo.city}">    <input type="hidden" id="area" value="{$vo.area}">    <input type="hidden" id="status" {if condition ="$vo.status eq 1"} value="1" {else/} value="0" {/if}>    <script type="text/javascript" src="__HOME__/js/aui.js"></script>    <script type="text/javascript" src="__HOME__/js/city.js"></script>    <script type="text/javascript" >        /**         * Javascript API调用Tab         */        !function ($) {            var $tab = $('#J_Tab');            $tab.tab({                nav: '.tab-nav-item',                panel: '.tab-panel-item',                activeClass: 'tab-active'            });            /*             $tab.find('.tab-nav-item').on('open.ydui.tab', function (e) {             console.log('索引：%s - [%s]正在打开', e.index, $(this).text());             });             */            $tab.find('.tab-nav-item').on('opened.ydui.tab', function (e) {                console.log('索引：%s - [%s]已经打开了', e.index, $(this).text());            });        }(jQuery);    </script>    <script>        /**         * 默认调用         */        !function () {            var $target = $('#J_Address');            $target.citySelect({                provance: '{$vo.prov}',                city: '{$vo.city}',                area: '{$vo.area}'            });            $target.on('click', function (event) {                event.stopPropagation();                $target.citySelect('open');            });            $target.on('done.ydui.cityselect', function (ret) {                $(this).val(ret.provance + ' ' + ret.city + ' ' + ret.area);                $('#prov').val(ret.provance);                $('#city').val(ret.city);                $('#area').val(ret.area);            });        }();    </script>    {include file="public/footer" /}    <script>        $('#on1').click(function(){            if($('#on1').attr('checked')){                $('#status').val(1);            }else{                $('#status').val(0);            }        });        var flag = true;        function update_address() {            if(flag) {                var id     = {$vo.id};                var status = $('#status').val();                var username = $('#username').val();                if(username == "") {                    layer.msg('收货人不能为空');                    $('#username').focus();                    return false;                }                if(username.length < 2) {                    layer.msg('收货人不能小于2字符');                    $('#username').focus();                    return false;                }                if(username.length > 10) {                    layer.msg('收货人请小于10字符');                    $('#username').focus();                    return false;                }                var mobile = $('#mobile').val();                if (mobile == "") {                    layer.msg('手机号不能为空');                    $('#mobile').focus();                    return false;                }                shous = /^1[3456789]\d{9}$/;                if (shous.test(mobile) === false) {                    layer.msg('手机号格式错误');                    $('#mobile').focus();                    return false;                }                var prov = $('#prov').val();                var city = $('#city').val();                var area = $('#area').val();                if(prov == "" || city == '' || area=='') {                    layer.msg('请选择省市区');                    return false;                }                var address = $('#address').val();                if(address == "") {                    layer.msg('请填写详细地址');                    $('#address').focus();                    return false;                }                if(address.length < 3) {                    layer.msg('详细地址不能小于3字符');                    $('#address').focus();                    return false;                }                if(address.length > 30) {                    layer.msg('详细地址不能大于30字符');                    $('#address').focus();                    return false;                }                //楼号                tower_num = $('#tower_num').val();                flag = false;                $.post("{:url('home/address/update_address')}",{id:id,username:username,mobile:mobile,prov:prov,city:city,area:area,address:address,status:status,tower_num:tower_num},function(data){                    if(data ==1 ) {                        layer.msg('修改成功',{                            time : 1000                        },function(){                            window.location.href="{:url('home/address/index')}";                        });                        return false;                    } else {                        layer.msg('网络异常重新尝试');                        return false;                    }                });            } else {                return false;            }        }    </script>