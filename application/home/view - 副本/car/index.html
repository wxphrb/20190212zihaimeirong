<!--顶部导航-->{include file="public/header" /}    <style>        .check_nm label{            margin-top: 0.25rem;        }        .product .pro_right{            width: 3.65rem;        }        .check_nm label{            margin-right: 0.25rem;        }        .product .pro_right .name{            margin-left: 0;            line-height: 0.3rem;            color: #4c4c4c;            margin-bottom: 0.15rem;            float: none!important;        }        .product .pro_right .name:after {            content: " ";            display: block;            clear: both;        }        .product .pro_right .price{            margin-top: 0.1rem;        }        .product .pro_right .price span{            font-size: 0.3rem;            line-height: 0.5rem;            margin-left: 0;        }        .product .pro_right .price .num{            font-size: 0.26rem;            color: #4c4c4c;            float: right;        }    </style><body style="background: #f4f4f4"><div class="wrap">    <header>        <img src="__HOME__/img/back_btn_03.png" class="back_btn" onclick="javascript:history.go(-1)">        <p class="title">购物车</p>       <a href="{:url('car/edit')}"> <span class="right_span">编辑</span></a>    </header>    <div class="shopcar_content" style="padding-bottom: 1.8rem;">        {volist name="data" id="vo"}        <div class="d1">            <div class="nav">                <div class="check_nm">                    <input type="checkbox" id="input3_{$vo.store_id}" name="radio1" onclick="store('{$vo.store_id}')">                    <label for="input3_{$vo.store_id}"></label>                </div>                <p class="name">{$vo.title}</p>            </div>            {volist name="vo['goods']" id="vv"}            <div class="product" >                <div class="check_nm">                    <input type="hidden" value="{$vv.id}">                    <input type="checkbox" id="input1_{$vv.id}" onclick="goods('{$vv.id}','{$vv.store_id}')" value="123" class="{$vv.store_id}">                    <label for="input1_{$vv.id}" style="margin-top: 0.6rem"></label>                </div>                <img src="__ROOT__{$vv.picurl}" alt="" class="left_img">                <div class="pro_right">                    <p class="name">{$vv.title}</p>                    <p class="gg" style="height: 0.3rem;">{$vv.attr_one}  {$vv.attr_two}</p>                    <div class="price">                        <span>￥{$vv.price}</span>                        <span class="num">x{$vv.num}</span>                    </div>                </div>            </div>            {/volist}        </div>{/volist}    </div>    <!--底部结算-->    <div class="bottom_js">        <div class="check_nm">            <input type="checkbox" id="input4">            <label for="input4" style="margin-top: 0.28rem;margin-right: 0.2rem;margin-left: 0.25rem"></label>        </div>        <span class="span1" onclick="all_choose()" id="all_choose">全选</span>        <button class="js_btn" onclick="jiesuan()">结算</button>        <div class="hj_div">            <p class="p1">合计：<span id="zong">¥00.00</span></p>            <p class="p2">不含运费</p>        </div>    </div>    <!--顶部导航-->    {include file="public/footer" /}    <!--顶部导航--></div></body></html><script>    /*全选*/    function all_choose(){        if($("#input4").is(':checked')){            $("input[type='checkbox']").removeAttr("checked");        }else{            $("input[type='checkbox']").attr("checked",true);        }        hj();    }    /*合计*/    function hj(){        var qian =0;        var danjia = '';        var num='';        $("div.product").each(function(){          var price_str = $(this).find('input:checked').parent().nextAll("div").find("span:first").text();          var num = $(this).find('input:checked').parent().nextAll("div").find("span.num").text();          var danjia  = price_str.substring(1);          var num  = num.substring(1);             qian += Number(danjia)*Number(num);        })        $("#zong").html('¥'+qian);    }    /*点击店铺*/    function store(id){     if($("#input3_"+id).is(':checked')){         $("input."+id).attr("checked",true);         if($("input[name='radio1']:checked").length==$("input[name='radio1']").length){             $("#input4").attr("checked",true);         }       }else{         $("input."+id).removeAttr("checked");         $("#input4").removeAttr("checked");     }        hj();    }   /*点击商品*/    function goods(id,sotre_id) {       if($("input[class="+sotre_id+"]:checked").length==$("input[class="+sotre_id+"]").length){            $("#input3_"+sotre_id).attr("checked",true);           if($("input[name='radio1']:checked").length==$("input[name='radio1']").length){               $("#input4").attr("checked",true);           }       }else{           $("#input3_"+sotre_id).removeAttr("checked");           $("#input4").removeAttr("checked");       }        hj();    }    //结算    function jiesuan(){        var str='';        var ids='';        $("div.product").each(function(){           ids = $(this).find('input:checked').prev("input").val();            if(typeof(ids) != "undefined"){                str += ids+',';            }        })        if (str.length > 0) {            str = str.substr(0, str.length - 1);        }else{            layer.msg('没有选择任何商品');            return false;        }        window.location.href="{:url('car/car_order')}?id="+str;    }</script>