<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>{$title}</title>    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>    <meta name="apple-mobile-web-app-capable" content="yes">    <meta name="apple-mobile-web-app-status-bar-style" content="black">    <meta name="format-detection" content="telephone=no">    <link href="__HOME__/css/phone.css" type="text/css" rel="stylesheet">    <link rel="stylesheet" href="__HOME__/css/new_add.css">    <script src="__HOME__/js/jquery-1.8.2.js" type="text/javascript"></script>    <script src="__HOME__/js/phone.js" type="text/javascript"></script>    <script type="text/javascript" src="__HOME__/layer/2.1/layer.js"></script></head><body><div class="wrap">    <header class="jia_new_add">        <a href="https://www.baidu.com"><img src="__HOME__/img/back_btn_03.png" class="back_btn"></a>        <p class="title">{$title}</p>    </header>    <div class="sign_box">        <div class="sign_box_cont">            <div class="sign_int_group">                <ul>                    <li>                        <span>手机号码</span>                        <input type="text" name="mobile" value="" id="mobile" placeholder="输入手机号码">                    </li>                    <li>                        <span>输入验证码</span>                        <input type="text" id="code" placeholder="输入验证码">                        <div class="sign_code">                            <button type="button" onclick="send();">获取验证码</button>                        </div>                    </li>                    <li>                        <span>设置密码</span>                        <input type="text" name="password" id="pwd" placeholder="输入登录密码">                    </li>                    <li>                        <span>确认密码</span>                        <input type="text" name="password2" id="pwd2" placeholder="输入登录密码">                    </li>                    <li>                        <span>填写邀请码</span>                        <input type="text" name="yqm" id="yqm" value="{$icode}" disabled="disabled">                    </li>                </ul>                <div class="sign_btn">                    <button onClick="CheckReg();">立即注册</button>                </div>                <div class="bg_top"><img src="__HOME__/img/bg_top.png" alt=""></div>            </div>        </div>    </div></div><script>    var sendable = 0; //全局变量 防止多次点击事件    function count() {        $("#sms").attr("disabled", true);        var sec = 60;        var intt = setInterval(function jishi() {                if (sec > 0) {                    sec--;                    var str = sec + "秒后重发";                    $("#sms").html(str);                }                else {                    $("#validate").css("background-color", '#DCDCDC');                    $("#sms").attr("disabled", false);                    $('#validate').removeClass('validate1').addClass('validate');                    $("#sms").html("点击重新发送");                    sendable = 0;                    clearInterval(intt);                }            }            , 1000);    }    function send() {        var ckmobile = /^[1][0-9]{10}/;        var mobile = $("#mobile").val();        if (!mobile) {            tips("手机号码为空！");            $("#mobile").focus();            return false;        } else {            if(!ckmobile.test(mobile)){                tips("手机号码格式错误！");                $("#mobile").focus();                return false;            }            if (sendable == 0) {                sendable = 1;                $.ajax({                    type: 'post',                    url: "{:url('api/login/getcode')}",                    data: "mobile=" + mobile + "&type=reg",                    dataType: 'json',                    success: function (data) {                        if (data.code == 200) {                            $('#validate').removeClass('validate').addClass('validate1');                            $("#mobile").attr("readonly", true);                            $("#realvalidate").val(data.codes);                            count();                            tips("发送成功。");                        }                        if (data['code'] == 400) {                            sendable = 0;                            tips(data.message);                            $("#mobile").val("");                        }                    },                    error: function (err) { //如果执行不成功，那么执行此方法                        sendable = 0;                        tips("请求失败，请重试！");                    }                });            }        }    }    var chickable = 0; //全局变量 防止多次点击事件    function CheckReg() {        var ckmobile = /^[1][0-9]{10}/;        var ckpassword = /[A-Za-z0-9]{6,12}/;        var user_phone = $("#mobile").val();        var password = $("#pwd").val();        var invited_id = $("#yqm").val();        var code = $("#code").val();        var repassword = $("#pwd2").val();        if(!user_phone){            tips('注册账户不能为空!');            $("#mobile").focus();            return false;        }        if(!ckmobile.test(user_phone)){            tips("手机号码格式错误！");            $("#mobile").focus();            return false;        }        if(!code){            tips('短信验证码不能为空!');            $("#code").focus();            return false;        }        if(!password){            tips('用户密码不能为空!');            $("#pwd").focus();            return false;        }        if(!repassword){            tips('确认密码不能为空!');            $("#pwd2").focus();            return false;        }        if(repassword != password){            tips('两次密码输入不一致!');            $("#pwd2").focus();            return false;        }        if (chickable == 0) {            chickable = 1;            $.ajax({                type: "POST",     //提交方式                dataType: "JSON",     //类型                url: "{:url('Login/register')}",    //提交的页面，方法名                data:                    "mobile=" + user_phone + "&password=" + password + "&invited_id=" + invited_id+"&sms_code="+code+"&repassword="+repassword+"&ftype=1",                success: function (data) { //如果执行成功，那么执行此方法                    if (data.code == "200") {                        tips("注册成功");                        if(data.ftype == "1"){                            setInterval(function () {                                window.location.href = "{:url('share/sss')}";                            }, 1000);                        }else{                            setInterval(function () {                                window.location.href = "{:url('login/login')}";                            }, 1000);                        }                    }                    if (data.code  == "400") {                        chickable = 0;                        tips(data.message);                    }                    if (data.data  == "3") {                        chickable = 0;                        tips("账号已存在！");                    }                },                error: function (err) { //如果执行不成功，那么执行此方法                    chickable = 0;                    tips("注册失败，请重试！");                }            });        }    }    function tips(data) {        /*layer.open({         content: data         });*/        layer.msg(data);    }</script></body></html>