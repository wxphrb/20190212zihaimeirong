<?phpnamespace app\home\validate;use think\Validate;use app\home\model\store as StoreModel;use think\Cache;class Store extends Validate{    protected  $rule = [        'manned'=>"require",        'pro' => 'require',        'title' => 'require',        'mobile' => 'require|length:11',        'sms_code' => 'require|length:6',    ];    protected $message = [        'manned.require'=>"真实姓名不能为空",        'pro.require'=>"所在地省份不能为空",        'title.require'=>"店铺名称不能为空",        'mobile.require'=>"电话号码不能为空",        'mobile.length'=>"请正确填写电话号码",        'sms_code.require'=>"验证码不能为空"    ];    protected $scene = [        'add'=>[            'mobile'=>'require|checkmobile','manned','pro','title','sms_code' => 'require|checkSMSCodeByMobile:smsupshop_code'        ]    ];    protected function checkmobile($value, $rules, $data)    {        $user_data = StoreModel::where(['mobile' => $data['mobile']])->find();        return empty($user_data) ? true : '电话号码已存在';    }    // 自定义验证短信验证    protected function checkSMSCodeByMobile($value, $rule, $data)    {        $key = $rule.$data['mobile'];        if (!Cache::has($key)) {            return '验证码已过期,请重新获取';        }        return ((string)$value == Cache::get($key)) ? true : '验证码错误';    }}